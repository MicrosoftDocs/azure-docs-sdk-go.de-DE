---
title: Authentifizierung mit dem Azure SDK für Go
description: Hier erfahren Sie, welche Authentifizierungsmethoden im Azure SDK für Go zur Verfügung stehen und wie Sie sie verwenden.
services: azure
author: sptramer
ms.author: sttramer
manager: carmonm
ms.date: 09/05/2018
ms.topic: conceptual
ms.technology: azure-sdk-go
ms.devlang: go
ms.subservice: authentication
ms.openlocfilehash: c66d6e65f36586bbe5b030cc3b783057b39668db
ms.sourcegitcommit: be967d413a8bf906470e65a97e61688faa9dd98a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 01/26/2019
ms.locfileid: "55071149"
---
# <a name="authentication-methods-in-the-azure-sdk-for-go"></a><span data-ttu-id="f8cd3-103">Authentifizierungsmethoden im Azure SDK für Go</span><span class="sxs-lookup"><span data-stu-id="f8cd3-103">Authentication methods in the Azure SDK for Go</span></span>

<span data-ttu-id="f8cd3-104">Das Azure SDK für Go bietet mehrere Möglichkeiten für die Authentifizierung über Azure.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-104">The Azure SDK for Go offers multiple ways to authenticate with Azure.</span></span> <span data-ttu-id="f8cd3-105">Diese _Authentifizierungsarten_ können mit verschiedenen _Authentifizierungsmethoden_ aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-105">These authentication _types_ are invoked through different authentication _methods_.</span></span> <span data-ttu-id="f8cd3-106">Dieser Artikel behandelt die verfügbaren Typen und Methoden und unterstützt Sie bei der Wahl der optimalen Typen und Methoden für Ihre Anwendung.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-106">This article covers the available types, methods, and how to choose which are best for your application.</span></span>

## <a name="available-authentication-types-and-methods"></a><span data-ttu-id="f8cd3-107">Verfügbare Authentifizierungsarten und -methoden</span><span class="sxs-lookup"><span data-stu-id="f8cd3-107">Available authentication types and methods</span></span>

<span data-ttu-id="f8cd3-108">Das Azure SDK für Go bietet verschiedene Authentifizierungsarten mit unterschiedlichen Anmeldeinformationen.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-108">The Azure SDK for Go offers several different types of authentication, using different credentials sets.</span></span> <span data-ttu-id="f8cd3-109">Alle Authentifizierungsarten können jeweils über verschiedene Authentifizierungsmethoden verwendet werden, die dazu dienen, die Anmeldeinformationen als Eingabe an das SDK zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-109">Each authentication type is available through different authentication methods, which are how the SDK takes these credentials as input.</span></span> <span data-ttu-id="f8cd3-110">Die folgende Tabelle enthält Informationen zu den verfügbaren Authentifizierungsarten sowie Verwendungsempfehlungen:</span><span class="sxs-lookup"><span data-stu-id="f8cd3-110">The following table describes the available types of authentication and situations in which they're recommended for use by your application.</span></span>

| <span data-ttu-id="f8cd3-111">Authentifizierungsart</span><span class="sxs-lookup"><span data-stu-id="f8cd3-111">Authentication type</span></span> | <span data-ttu-id="f8cd3-112">Verwendungsempfehlung</span><span class="sxs-lookup"><span data-stu-id="f8cd3-112">Recommended when...</span></span> |
|---------------------|---------------------|
| <span data-ttu-id="f8cd3-113">Zertifikatbasierte Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="f8cd3-113">Certificate-based authentication</span></span> | <span data-ttu-id="f8cd3-114">Sie verfügen über ein X.509-Zertifikat, das für einen AAD-Benutzer oder -Dienstprinzipal (Azure Active Directory) konfiguriert wurde.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-114">You have an X509 certificate that was configured for an Azure Active Directory (AAD) user or service principal.</span></span> <span data-ttu-id="f8cd3-115">Weitere Informationen finden Sie unter [Erste Schritte mit zertifikatbasierter Authentifizierung in Azure Active Directory].</span><span class="sxs-lookup"><span data-stu-id="f8cd3-115">To learn more, see [Get started with certificate-based authentication in Azure Active Directory].</span></span> |
| <span data-ttu-id="f8cd3-116">Client credentials (Clientanmeldeinformationen)</span><span class="sxs-lookup"><span data-stu-id="f8cd3-116">Client credentials</span></span> | <span data-ttu-id="f8cd3-117">Sie verfügen über einen konfigurierten Dienstprinzipal, der für diese Anwendung oder für eine Klasse von Anwendungen konfiguriert ist, der sie angehört.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-117">You have a configured service principal that is set up for this application or a class of applications it belongs to.</span></span> <span data-ttu-id="f8cd3-118">Weitere Informationen finden Sie unter [Erstellen eines Dienstprinzipals über die Azure CLI].</span><span class="sxs-lookup"><span data-stu-id="f8cd3-118">To learn more, see [Create a service principal with Azure CLI].</span></span> |
| <span data-ttu-id="f8cd3-119">Verwaltete Identitäten für Azure-Ressourcen</span><span class="sxs-lookup"><span data-stu-id="f8cd3-119">Managed identities for Azure resources</span></span> | <span data-ttu-id="f8cd3-120">Ihre Anwendung wird auf einer Azure-Ressource ausgeführt, die mit einer verwalteten Identität konfiguriert wurde.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-120">Your application is running on an Azure resource that has been configured with a managed identity.</span></span> <span data-ttu-id="f8cd3-121">Weitere Informationen finden Sie unter [Verwaltete Identitäten für Azure-Ressourcen] (Worum handelt es sich bei verwalteten Identitäten für Azure-Ressourcen?).</span><span class="sxs-lookup"><span data-stu-id="f8cd3-121">To learn more, see [Managed identities for Azure resources].</span></span> |
| <span data-ttu-id="f8cd3-122">Gerätetoken</span><span class="sxs-lookup"><span data-stu-id="f8cd3-122">Device token</span></span> | <span data-ttu-id="f8cd3-123">Ihre Anwendung ist __nur__ für die interaktive Verwendung vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-123">Your application is meant to be used interactively __only__.</span></span> <span data-ttu-id="f8cd3-124">Benutzer haben unter Umständen die mehrstufige Authentifizierung aktiviert.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-124">Users may have multi-factor authentication enabled.</span></span> <span data-ttu-id="f8cd3-125">Benutzer können sich über einen Webbrowser anmelden.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-125">Users have access to a web browser to sign in.</span></span> <span data-ttu-id="f8cd3-126">Weitere Informationen finden Sie unter [Verwenden der Gerätetokenauthentifizierung](#use-device-token-authentication).</span><span class="sxs-lookup"><span data-stu-id="f8cd3-126">For more information, see [Use device token authentication](#use-device-token-authentication).</span></span>|
| <span data-ttu-id="f8cd3-127">Benutzername/Kennwort</span><span class="sxs-lookup"><span data-stu-id="f8cd3-127">Username/password</span></span> | <span data-ttu-id="f8cd3-128">Sie verfügen über eine interaktive Anwendung, die keine andere Authentifizierungsmethode verwenden kann.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-128">You have an interactive application that can't use any other authentication method.</span></span> <span data-ttu-id="f8cd3-129">Für Ihre Benutzer ist die mehrstufige Authentifizierung für die AAD-Anmeldung nicht aktiviert.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-129">Your users don't have multi-factor authentication enabled for their AAD sign-in.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="f8cd3-130">Wenn Sie als Authentifizierungsart keine Clientanmeldeinformationen verwenden, muss Ihre Anwendung in Azure Active Directory registriert werden.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-130">If you use an authentication type other than client credentials, your application must be registered in Azure Active Directory.</span></span> <span data-ttu-id="f8cd3-131">Eine entsprechende Anleitung finden Sie unter [Integrieren von Anwendungen in Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span><span class="sxs-lookup"><span data-stu-id="f8cd3-131">To learn how, see [Integrating applications with Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span></span>
>
> [!NOTE]
> <span data-ttu-id="f8cd3-132">Verwenden Sie die Authentifizierung mit Benutzername/Kennwort nur, wenn dies zur Erfüllung besonderer Anforderungen erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-132">Unless you have special requirements, avoid username/password authentication.</span></span> <span data-ttu-id="f8cd3-133">In Situationen, in denen eine benutzerbasierte Anmeldung geeignet ist, kann in der Regel auch die Gerätetokenauthentifizierung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-133">In situations where user-based sign in is appropriate, device token authentication can usually be used instead.</span></span>

[Erste Schritte mit zertifikatbasierter Authentifizierung in Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Get started with certificate-based authentication in Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Erstellen eines Dienstprinzipals über die Azure CLI]: /cli/azure/create-an-azure-service-principal-azure-cli
[Create a service principal with Azure CLI]: /cli/azure/create-an-azure-service-principal-azure-cli
[Verwaltete Identitäten für Azure-Ressourcen]: /azure/active-directory/managed-identities-azure-resources/overview
[Managed identities for Azure resources]: /azure/active-directory/managed-identities-azure-resources/overview

<span data-ttu-id="f8cd3-137">Diese Authentifizierungsarten können mit verschiedenen Methoden verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-137">These authentication types are available through different methods.</span></span>

* <span data-ttu-id="f8cd3-138">Bei der [_umgebungsbasierten Authentifizierung_](#use-environment-based-authentication) werden die Anmeldeinformationen direkt aus der Umgebung des Programms gelesen.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-138">[_Environment-based authentication_](#use-environment-based-authentication) reads credentials directly from the program's environment.</span></span>
* <span data-ttu-id="f8cd3-139">Bei der [_dateibasierten Authentifizierung_](#use-file-based-authentication) wird eine Datei mit Dienstprinzipal-Anmeldeinformationen geladen.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-139">[_File-based authentication_](#use-file-based-authentication) loads a file containing service principal credentials.</span></span>
* <span data-ttu-id="f8cd3-140">Bei der [_clientbasierten Authentifizierung_](#use-an-authentication-client) wird ein Objekt im Code verwendet, und die Anmeldeinformationen müssen von Ihnen während der Programmausführung angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-140">[_Client-based authentication_](#use-an-authentication-client) uses an object in code and makes you responsible for providing the credentials during program execution.</span></span>
* <span data-ttu-id="f8cd3-141">Bei der [_Gerätetokenauthentifizierung_](#use-device-token-authentication) müssen sich Benutzer interaktiv mit einem Token über einen Webbrowser anmelden.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-141">[_Device token authentication_](#use-device-token-authentication) requires users to sign in interactively through a web browser with a token.</span></span>

<span data-ttu-id="f8cd3-142">Alle Authentifizierungsfunktionen und -arten stehen im Paket `github.com/Azure/go-autorest/autorest/azure/auth` zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-142">All authentication functions and types are available in the `github.com/Azure/go-autorest/autorest/azure/auth` package.</span></span>

> [!NOTE]
> <span data-ttu-id="f8cd3-143">Verwenden Sie die clientbasierte Authentifizierung nur, wenn dies zur Erfüllung besonderer Anforderungen erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-143">Unless you have special requirements, avoid client-based authentication.</span></span> <span data-ttu-id="f8cd3-144">Diese Authentifizierungsmethode verleitet zu nicht empfehlenswerten Vorgehensweisen.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-144">This method of authentication encourages bad practices.</span></span> <span data-ttu-id="f8cd3-145">Dazu zählt in erster Linie die Verwendung hartcodierter Anmeldeinformationen.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-145">In particular, using client-based authentication makes it tempting to hard-code credentials.</span></span> <span data-ttu-id="f8cd3-146">Bei benutzerdefiniertem Code für die Authentifizierung besteht die Gefahr, dass er in späteren SDK-Versionen nicht mehr funktioniert, falls sich die Authentifizierungsanforderungen ändern.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-146">Writing custom code for authentication may also break under future SDK releases if authentication requirements change.</span></span>

## <a name="use-environment-based-authentication"></a><span data-ttu-id="f8cd3-147">Verwenden der umgebungsbasierten Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="f8cd3-147">Use environment-based authentication</span></span>

<span data-ttu-id="f8cd3-148">Wenn Sie Ihre Anwendung in einer kontrollierten Umgebung ausführen, ist die umgebungsbasierte Authentifizierung eine naheliegende Option.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-148">If you're running your application in a controlled setting, environment-based authentication is a natural choice.</span></span> <span data-ttu-id="f8cd3-149">Bei dieser Authentifizierungsmethode konfigurieren Sie die Shell-Umgebung vor dem Ausführen Ihrer Anwendung.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-149">With this authentication method, you configure the shell environment before running your application.</span></span> <span data-ttu-id="f8cd3-150">Zur Laufzeit liest das Go SDK diese Umgebungsvariablen für die Authentifizierung bei Azure.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-150">At runtime, the Go SDK reads these environment variables to authenticate with Azure.</span></span>

<span data-ttu-id="f8cd3-151">Die umgebungsbasierte Authentifizierung unterstützt alle Authentifizierungsmethoden (mit Ausnahme von Gerätetoken). Die Auswertung erfolgt in der folgenden Reihenfolge:</span><span class="sxs-lookup"><span data-stu-id="f8cd3-151">Environment-based authentication has support for all authentication methods except device tokens, evaluated in the following order:</span></span>

* <span data-ttu-id="f8cd3-152">Client credentials (Clientanmeldeinformationen)</span><span class="sxs-lookup"><span data-stu-id="f8cd3-152">Client credentials</span></span>
* <span data-ttu-id="f8cd3-153">X509-Zertifikate</span><span class="sxs-lookup"><span data-stu-id="f8cd3-153">X509 certificates</span></span>
* <span data-ttu-id="f8cd3-154">Benutzername/Kennwort</span><span class="sxs-lookup"><span data-stu-id="f8cd3-154">Username/password</span></span>
* <span data-ttu-id="f8cd3-155">Verwaltete Identitäten für Azure-Ressourcen</span><span class="sxs-lookup"><span data-stu-id="f8cd3-155">Managed identities for Azure resources</span></span>

<span data-ttu-id="f8cd3-156">Sind für einen Authentifizierungstyp keine Werte festgelegt oder wird der Authentifizierungstyp verweigert, probiert das SDK automatisch den nächsten Authentifizierungstyp aus.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-156">If an authentication type has unset values or is refused, the SDK automatically tries the next authentication type.</span></span> <span data-ttu-id="f8cd3-157">Wenn keine weitere Typen mehr übrig sind, gibt das SDK einen Fehler zurück.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-157">When no more types are available to try, the SDK returns an error.</span></span>

<span data-ttu-id="f8cd3-158">Die folgende Tabelle gibt Aufschluss über die Umgebungsvariablen, die für die einzelnen Authentifizierungsarten festgelegt werden müssen, die von der umgebungsbasierten Authentifizierung unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-158">The following table details the environment variables that need to be set for each authentication type supported by environment-based authentication.</span></span>


|  <span data-ttu-id="f8cd3-159">Authentifizierungsart</span><span class="sxs-lookup"><span data-stu-id="f8cd3-159">Authentication type</span></span>   |     <span data-ttu-id="f8cd3-160">Umgebungsvariable</span><span class="sxs-lookup"><span data-stu-id="f8cd3-160">Environment variable</span></span>     |                                                                                                     <span data-ttu-id="f8cd3-161">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="f8cd3-161">Description</span></span>                                                                                                      |
|------------------------|------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f8cd3-162">**Clientanmeldeinformationen**</span><span class="sxs-lookup"><span data-stu-id="f8cd3-162">**Client credentials**</span></span> |      `AZURE_TENANT_ID`       |                                                                    <span data-ttu-id="f8cd3-163">Die ID für den Active Directory-Mandanten, zu dem der Dienstprinzipal gehört.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-163">The ID for the Active Directory tenant that the service principal belongs to.</span></span>                                                                     |
|                        |      `AZURE_CLIENT_ID`       |                                                                                       <span data-ttu-id="f8cd3-164">Der Name oder die ID des Dienstprinzipals.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-164">The name or ID of the service principal.</span></span>                                                                                       |
|                        |    `AZURE_CLIENT_SECRET`     |                                                                                  <span data-ttu-id="f8cd3-165">Das dem Dienstprinzipal zugeordnete Geheimnis</span><span class="sxs-lookup"><span data-stu-id="f8cd3-165">The secret associated with the service principal.</span></span>                                                                                   |
|    <span data-ttu-id="f8cd3-166">**Certificate**</span><span class="sxs-lookup"><span data-stu-id="f8cd3-166">**Certificate**</span></span>     |      `AZURE_TENANT_ID`       |                                                                   <span data-ttu-id="f8cd3-167">Die ID für den Active Directory-Mandanten, bei dem das Zertifikat registriert ist.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-167">The ID for the Active Directory tenant that the certificate is registered with.</span></span>                                                                    |
|                        |      `AZURE_CLIENT_ID`       |                                                                              <span data-ttu-id="f8cd3-168">Die dem Zertifikat zugeordnete Anwendungsclient-ID.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-168">The application client ID associated with the certificate.</span></span>                                                                              |
|                        |   `AZURE_CERTIFICATE_PATH`   |                                                                                       <span data-ttu-id="f8cd3-169">Der Pfad der Clientzertifikatdatei.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-169">The path to the client certificate file.</span></span>                                                                                       |
|                        | `AZURE_CERTIFICATE_PASSWORD` |                                                                                       <span data-ttu-id="f8cd3-170">Das Kennwort für das Clientzertifikat.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-170">The password for the client certificate.</span></span>                                                                                       |
| <span data-ttu-id="f8cd3-171">**Benutzername/Kennwort**</span><span class="sxs-lookup"><span data-stu-id="f8cd3-171">**Username/Password**</span></span>  |      `AZURE_TENANT_ID`       |                                                                           <span data-ttu-id="f8cd3-172">Die ID für den Active Directory-Mandanten, zu dem der Benutzer gehört.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-172">The ID for the Active Directory tenant that the user belongs to.</span></span>                                                                           |
|                        |      `AZURE_CLIENT_ID`       |                                                                                              <span data-ttu-id="f8cd3-173">Die Anwendungsclient-ID.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-173">The application client ID.</span></span>                                                                                              |
|                        |       `AZURE_USERNAME`       |                                                                                            <span data-ttu-id="f8cd3-174">Der Benutzername für die Anmeldung.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-174">The username to sign in with.</span></span>                                                                                             |
|                        |       `AZURE_PASSWORD`       |                                                                                            <span data-ttu-id="f8cd3-175">Das Kennwort für die Anmeldung.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-175">The password to sign in with.</span></span>                                                                                             |
|  <span data-ttu-id="f8cd3-176">**Verwaltete Identität**</span><span class="sxs-lookup"><span data-stu-id="f8cd3-176">**Managed identity**</span></span>  |                              | <span data-ttu-id="f8cd3-177">Für die Authentifizierung der verwalteten Identität sind keine Anmeldeinformationen erforderlich.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-177">No credentials are needed for managed identity authentication.</span></span> <span data-ttu-id="f8cd3-178">Die Anwendung muss auf einer Azure-Ressource ausgeführt werden, die für die Verwendung von verwalteten Identitäten konfiguriert ist.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-178">The application must be running on an Azure resource configured to use managed identities.</span></span> <span data-ttu-id="f8cd3-179">Ausführliche Informationen finden Sie unter [Verwaltete Identitäten für Azure-Ressourcen] (Worum handelt es sich bei verwalteten Identitäten für Azure-Ressourcen?).</span><span class="sxs-lookup"><span data-stu-id="f8cd3-179">For details, see [Managed identities for Azure resources].</span></span> |

<span data-ttu-id="f8cd3-180">Wenn Sie eine Verbindung mit einem Cloud- oder Verwaltungsendpunkt herstellen möchten, bei dem es sich nicht um die standardmäßige öffentliche Azure-Cloud handelt, legen Sie die folgenden Umgebungsvariablen fest.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-180">To connect to a cloud or management endpoint other than the default Azure public cloud, set the following environment variables.</span></span> <span data-ttu-id="f8cd3-181">Diese werden häufig bei Verwendung von Azure Stack, bei Verwendung einer Cloud in einer anderen geografischen Region oder bei Verwendung des klassischen Bereitstellungsmodells festgelegt.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-181">The most common reasons are if you use Azure Stack, a cloud in a different geographic region, or the classic deployment model.</span></span>

| <span data-ttu-id="f8cd3-182">Umgebungsvariable</span><span class="sxs-lookup"><span data-stu-id="f8cd3-182">Environment variable</span></span> | <span data-ttu-id="f8cd3-183">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="f8cd3-183">Description</span></span>  |
|----------------------|--------------|
| `AZURE_ENVIRONMENT` | <span data-ttu-id="f8cd3-184">Der Name der Cloudumgebung, mit der eine Verbindung hergestellt werden soll.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-184">The name of the cloud environment to connect to.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="f8cd3-185">Die Active Directory-Ressourcen-ID, die beim Herstellen einer Verbindung mit dem Verwaltungsendpunkt als URI verwendet wird</span><span class="sxs-lookup"><span data-stu-id="f8cd3-185">The Active Directory resource ID to use when connecting, as a URI to your management endpoint.</span></span> |

<span data-ttu-id="f8cd3-186">Rufen Sie bei Verwendung der umgebungsbasierten Authentifizierung die Funktion [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) auf, um Ihr Authorizer-Objekt abzurufen.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-186">When using environment-based authentication, call the [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) function to get your authorizer object.</span></span> <span data-ttu-id="f8cd3-187">Dieses Objekt wird dann für die Eigenschaft `Authorizer` von Clients festgelegt, um ihnen den Zugriff auf Azure zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-187">This object is then set on the `Authorizer` property of clients to allow them access to Azure.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := auth.NewAuthorizerFromEnvironment()
```

### <a name="authentication-on-azure-stack"></a><span data-ttu-id="f8cd3-188">Authentifizierung in Azure Stack</span><span class="sxs-lookup"><span data-stu-id="f8cd3-188">Authentication on Azure Stack</span></span>

<span data-ttu-id="f8cd3-189">Für die Authentifizierung in Azure Stack müssen Sie die folgenden Variablen festlegen:</span><span class="sxs-lookup"><span data-stu-id="f8cd3-189">To authenticate on Azure Stack, you need to set the following variables:</span></span>

| <span data-ttu-id="f8cd3-190">Umgebungsvariable</span><span class="sxs-lookup"><span data-stu-id="f8cd3-190">Environment variable</span></span> | <span data-ttu-id="f8cd3-191">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="f8cd3-191">Description</span></span>  |
|----------------------|--------------|
| `AZURE_AD_ENDPOINT` | <span data-ttu-id="f8cd3-192">Active Directory-Endpunkt</span><span class="sxs-lookup"><span data-stu-id="f8cd3-192">The Active Directory endpoint.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="f8cd3-193">Active Directory-Ressourcen-ID</span><span class="sxs-lookup"><span data-stu-id="f8cd3-193">The Active Directory resource ID.</span></span> |

<span data-ttu-id="f8cd3-194">Diese Variablen können aus den Azure Stack-Metadateninformationen abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-194">These variables can be retrieved from Azure Stack metadata information.</span></span> <span data-ttu-id="f8cd3-195">Öffnen Sie zum Abrufen der Metadaten einen Webbrowser in Ihrer Azure Stack-Umgebung, und geben Sie die folgende URL ein: `(ResourceManagerURL)/metadata/endpoints?api-version=1.0`.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-195">To retrieve the metadata, open a web browser in your Azure Stack environment and use the url: `(ResourceManagerURL)/metadata/endpoints?api-version=1.0`</span></span>

<span data-ttu-id="f8cd3-196">`ResourceManagerURL` variiert basierend auf dem Regionsnamen, dem Computernamen und dem externen vollqualifizierten Domänennamen (Fully Qualified Domain Name, FQDN) der Azure Stack-Bereitstellung:</span><span class="sxs-lookup"><span data-stu-id="f8cd3-196">The `ResourceManagerURL` varies based on the region name, machine name, and external fully qualified domain name (FQDN) of your Azure Stack deployment:</span></span>

| <span data-ttu-id="f8cd3-197">Environment</span><span class="sxs-lookup"><span data-stu-id="f8cd3-197">Environment</span></span> | <span data-ttu-id="f8cd3-198">ResourceManagerURL</span><span class="sxs-lookup"><span data-stu-id="f8cd3-198">ResourceManagerURL</span></span> |
|----------------------|--------------|
| <span data-ttu-id="f8cd3-199">Development Kit</span><span class="sxs-lookup"><span data-stu-id="f8cd3-199">Development Kit</span></span> | `https://management.local.azurestack.external/` |
| <span data-ttu-id="f8cd3-200">Integrierte Systeme</span><span class="sxs-lookup"><span data-stu-id="f8cd3-200">Integrated Systems</span></span> | `https://management.(region).ext-(machine-name).(FQDN)` |

<span data-ttu-id="f8cd3-201">Weitere Informationen zur Verwendung des Azure SDK für Go in Azure Stack finden Sie unter [Verwenden von API-Versionsprofilen mit Go in Azure Stack](https://docs.microsoft.com/azure/azure-stack/user/azure-stack-version-profiles-go).</span><span class="sxs-lookup"><span data-stu-id="f8cd3-201">For more information on how to use the Azure SDK for Go on Azure Stack, see [Use API version profiles with Go in Azure Stack](https://docs.microsoft.com/azure/azure-stack/user/azure-stack-version-profiles-go)</span></span>

## <a name="use-file-based-authentication"></a><span data-ttu-id="f8cd3-202">Verwenden der dateibasierten Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="f8cd3-202">Use file-based authentication</span></span>

<span data-ttu-id="f8cd3-203">Bei der dateibasierten Authentifizierung wird ein von der [Azure CLI](/cli/azure) generiertes Dateiformat verwendet.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-203">File-based authentication uses a file format generated by [the Azure CLI](/cli/azure).</span></span> <span data-ttu-id="f8cd3-204">Diese Datei können Sie im Rahmen der Erstellung eines neuen Dienstprinzipals ganz einfach mit dem Parameter `--sdk-auth` erstellen.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-204">You can easily create this file when creating a new service principal with the `--sdk-auth` parameter.</span></span> <span data-ttu-id="f8cd3-205">Wenn Sie die dateibasierte Authentifizierung verwenden möchten, achten Sie darauf, dass dieses Argument bei der Dienstprinzipalerstellung angegeben ist.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-205">If you plan on using file-based authentication, make sure that this argument is provided when creating a service principal.</span></span> <span data-ttu-id="f8cd3-206">Da die CLI-Ausgabe in `stdout` erfolgt, leiten Sie die Ausgabe in eine Datei um.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-206">Since the CLI prints output to `stdout`, redirect output to a file.</span></span>

```azurecli
az ad sp create-for-rbac --sdk-auth > azure.auth
```

<span data-ttu-id="f8cd3-207">Legen Sie die Umgebungsvariable `AZURE_AUTH_LOCATION` auf den Speicherort der Autorisierungsdatei fest.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-207">Set the `AZURE_AUTH_LOCATION` environment variable to where the authorization file is located.</span></span> <span data-ttu-id="f8cd3-208">Diese Umgebungsvariable wird von der Anwendung gelesen, und die darin enthaltenen Anmeldeinformationen werden analysiert.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-208">This environment variable is read by the application, and the credentials within it are parsed.</span></span> <span data-ttu-id="f8cd3-209">Wenn Sie die Autorisierungsdatei zur Laufzeit auswählen müssen, bearbeiten Sie die Programmumgebung mithilfe der Funktion [os.Setenv](https://golang.org/pkg/os/#Setenv).</span><span class="sxs-lookup"><span data-stu-id="f8cd3-209">If you need to select the authorization file at runtime, manipulate the program's environment using the [os.Setenv](https://golang.org/pkg/os/#Setenv) function.</span></span>

<span data-ttu-id="f8cd3-210">Rufen Sie zum Laden der Authentifizierungsinformationen die Funktion [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile) auf.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-210">To load the authentication information, call the [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile) function.</span></span> <span data-ttu-id="f8cd3-211">Im Gegensatz zur umgebungsbasierten Autorisierung benötigt die dateibasierte Autorisierung einen Ressourcenendpunkt.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-211">Unlike environment-based authorization, file-based authorization requires a resource endpoint.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := NewAuthorizerFromFile(azure.PublicCloud.ResourceManagerEndpoint)
```

<span data-ttu-id="f8cd3-212">Weitere Informationen zur Verwendung von Dienstprinzipalen sowie zur Verwaltung ihrer Zugriffsberechtigungen finden Sie unter [Erstellen eines Dienstprinzipals über die Azure CLI].</span><span class="sxs-lookup"><span data-stu-id="f8cd3-212">For more on using service principals and managing their access permissions, see [Create a service principal with Azure CLI].</span></span>

## <a name="use-device-token-authentication"></a><span data-ttu-id="f8cd3-213">Verwenden der Gerätetokenauthentifizierung</span><span class="sxs-lookup"><span data-stu-id="f8cd3-213">Use device token authentication</span></span>

<span data-ttu-id="f8cd3-214">Wenn sich Benutzer interaktiv anmelden sollen, empfiehlt sich die Verwendung der Gerätetokenauthentifizierung.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-214">If you want users to sign in interactively, the best way is through device token authentication.</span></span> <span data-ttu-id="f8cd3-215">Bei diesem Authentifizierungsablauf wird ein Token an den Benutzer übergeben, das dieser auf einer Anmeldewebsite von Microsoft einfügt, auf der er sich bei einem AAD-Konto (Azure Active Directory) authentifiziert.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-215">This authentication flow passes the user a token to paste into a Microsoft sign-in site, where they then authenticate with an Azure Active Directory (AAD) account.</span></span> <span data-ttu-id="f8cd3-216">Im Gegensatz zur Standardauthentifizierung mit Benutzername/Kennwort unterstützt diese Authentifizierungsmethode Konten mit aktivierter mehrstufiger Authentifizierung.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-216">This authentication method supports accounts that have multi-factor authentication enabled, unlike standard username/password authentication.</span></span>

<span data-ttu-id="f8cd3-217">Erstellen Sie zur Verwendung der Gerätetokenauthentifizierung mithilfe der Funktion [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig) ein Authorizer-Objekt vom Typ [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig).</span><span class="sxs-lookup"><span data-stu-id="f8cd3-217">To use device token authentication, create a [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) authorizer with the [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig) function.</span></span> <span data-ttu-id="f8cd3-218">Rufen Sie [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) für das resultierende Objekt auf, um den Authentifizierungsprozess zu starten.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-218">Call [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) on the resulting object to start the authentication process.</span></span> <span data-ttu-id="f8cd3-219">Die Geräteauthentifizierung blockiert die Programmausführung, bis der gesamte Authentifizierungsablauf abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-219">Device flow authentication blocks program execution until the whole authentication flow is complete.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
deviceConfig := auth.NewDeviceFlowConfig(applicationID, tenantID)
authorizer, err := deviceConfig.Authorizer()
```

## <a name="use-an-authentication-client"></a><span data-ttu-id="f8cd3-220">Verwenden eines Authentifizierungsclients</span><span class="sxs-lookup"><span data-stu-id="f8cd3-220">Use an authentication client</span></span>

<span data-ttu-id="f8cd3-221">Wenn Sie eine bestimmte Art von Authentifizierung benötigen und das Laden der Authentifizierungsinformationen des Benutzers Ihrem Programm überlassen möchten, können Sie einen beliebigen Client verwenden, der mit der Schnittstelle [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig) kompatibel ist.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-221">If you require a specific type of authentication and are willing to have your program do the work to load authentication information from the user, you can use any client that conforms to the [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig) interface.</span></span> <span data-ttu-id="f8cd3-222">Verwenden Sie einen Typ, der diese Schnittstelle in den folgenden Fällen implementiert:</span><span class="sxs-lookup"><span data-stu-id="f8cd3-222">Use a type that implements this interface when you:</span></span>

* <span data-ttu-id="f8cd3-223">Schreiben eines interaktiven Programms</span><span class="sxs-lookup"><span data-stu-id="f8cd3-223">Write an interactive program</span></span>
* <span data-ttu-id="f8cd3-224">Verwenden spezieller Konfigurationsdateien</span><span class="sxs-lookup"><span data-stu-id="f8cd3-224">Use specialized configuration files</span></span>
* <span data-ttu-id="f8cd3-225">Anforderung, die die Verwendung einer integrierten Authentifizierungsmethode verhindert</span><span class="sxs-lookup"><span data-stu-id="f8cd3-225">Have a requirement that prevents using a built-in authentication method</span></span>

> [!WARNING]
> <span data-ttu-id="f8cd3-226">Verwenden Sie in einer Anwendung niemals hartcodierte Azure-Anmeldeinformationen.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-226">Never hard-code Azure credentials into an application.</span></span> <span data-ttu-id="f8cd3-227">In der Binärdatei einer Anwendung enthaltene Geheimnisse können von Angreifern leichter extrahiert werden. Dabei spielt es keine Rolle, ob die Anwendung ausgeführt wird oder nicht.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-227">Putting secrets into an application binary makes it easier for an attacker to extract them, whether the application is running or not.</span></span> <span data-ttu-id="f8cd3-228">Dies gefährdet alle Azure-Ressourcen, für die die Anmeldeinformationen autorisiert sind.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-228">This puts all Azure resources the credentials are authorized for at risk!</span></span>

<span data-ttu-id="f8cd3-229">Die folgende Tabelle enthält die mit der Schnittstelle `AuthorizerConfig` kompatiblen Arten aus dem SDK.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-229">The following table lists the types in the SDK that conform to the `AuthorizerConfig` interface.</span></span>

| <span data-ttu-id="f8cd3-230">Authentifizierungsart</span><span class="sxs-lookup"><span data-stu-id="f8cd3-230">Authentication type</span></span> | <span data-ttu-id="f8cd3-231">Authorizer-Typ</span><span class="sxs-lookup"><span data-stu-id="f8cd3-231">Authorizer type</span></span> |
|---------------------|-----------------------|
| <span data-ttu-id="f8cd3-232">Zertifikatbasierte Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="f8cd3-232">Certificate-based authentication</span></span> | <span data-ttu-id="f8cd3-233">[ClientCertificateConfig]</span><span class="sxs-lookup"><span data-stu-id="f8cd3-233">[ClientCertificateConfig]</span></span> |
| <span data-ttu-id="f8cd3-234">Client credentials (Clientanmeldeinformationen)</span><span class="sxs-lookup"><span data-stu-id="f8cd3-234">Client credentials</span></span> | <span data-ttu-id="f8cd3-235">[ClientCredentialsConfig]</span><span class="sxs-lookup"><span data-stu-id="f8cd3-235">[ClientCredentialsConfig]</span></span> |
| <span data-ttu-id="f8cd3-236">Verwaltete Identitäten für Azure-Ressourcen</span><span class="sxs-lookup"><span data-stu-id="f8cd3-236">Managed identities for Azure resources</span></span> | <span data-ttu-id="f8cd3-237">[MSIConfig]</span><span class="sxs-lookup"><span data-stu-id="f8cd3-237">[MSIConfig]</span></span> |
| <span data-ttu-id="f8cd3-238">Benutzername/Kennwort</span><span class="sxs-lookup"><span data-stu-id="f8cd3-238">Username/password</span></span> | <span data-ttu-id="f8cd3-239">[UsernamePasswordConfig]</span><span class="sxs-lookup"><span data-stu-id="f8cd3-239">[UsernamePasswordConfig]</span></span> |

[ClientCertificateConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCertificateConfig
[ClientCredentialsConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCredentialsConfig
[MSIConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#MSIConfig
[DeviceFlowConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig
[UsernamePasswordConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#UsernamePasswordConfig

<span data-ttu-id="f8cd3-244">Erstellen Sie einen Authentifikator mit der entsprechenden `New`-Funktion, und rufen Sie dann `Authorize` für das resultierende Objekt auf, um die Authentifizierung durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="f8cd3-244">Create an authenticator with its associated `New` function, and then call `Authorize` on the resulting object to authenticate.</span></span> <span data-ttu-id="f8cd3-245">Beispiel für die zertifikatbasierte Authentifizierung:</span><span class="sxs-lookup"><span data-stu-id="f8cd3-245">For example, to use certificate-based authentication:</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
certificateAuthorizer := auth.NewClientCertificateConfig(certificatePath, certificatePassword, clientID, tenantID)
authorizerToken, err := certificateAuthorizer.Authorize()
```
